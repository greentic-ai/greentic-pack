# Publishing to crates.io

This repository ships two distributable crates:

- `packc` – the CLI used to build Greentic packs
- `pack_component` – the Wasm component library generated by the builder

Publishing flow:

1. Ensure `CARGO_REGISTRY_TOKEN` is configured in GitHub secrets with publish
   rights for the `greentic-*` organisation.
2. Create and push a tag of the form `vX.Y.Z`. The automated workflow
   `.github/workflows/publish.yml` will run `cargo publish` for both crates in
   dependency order.
3. Wait for the job to finish. Published versions are immutable; if a release
   fails, yank the partial upload and bump the patch version before re-tagging.

Local dry-run before tagging:

```bash
cargo publish -p pack_component --dry-run
cargo publish -p packc --dry-run
```

The component crate should be published first so the CLI's dependency graph
resolves correctly for downstream users.
